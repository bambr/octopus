# one.ping()
:pong

# two.ping()
:pong

# one.create_shard(1, :POR, "one")
:success

# one.create_object_space(0, {:shard=>1, :index=>{:type=>:FASTTREE, :unique=>1, :field_0=>{:type=>:STRING, :index=>0, :sort_order=>:DESC}}})
:success

# one.insert([1, "one"], {:shard=>1})
1

# two.create_shard(1, :POR, "one", "two")
:success

# two.create_shard(1, :POR, "two", "one")
:success

# one.insert([1, "one2"], {:shard=>1})
2

# one.select(1, {:shard=>1})
[["\x01\x00\x00\x00", "one2"]]

# two.select(1, {:shard=>1})
[["\x01\x00\x00\x00", "one2"]]

# two.insert([1, "two2"], {:shard=>1})
2

# one.select(1, {:shard=>1})
[["\x01\x00\x00\x00", "two2"]]

# two.select(1, {:shard=>1})
[["\x01\x00\x00\x00", "two2"]]

lsn:1 scn:-1 t:sys/snap_initial 0.0.0.0:0 ver:0 count:1 flags:0x00000000
lsn:1 scn:4 t:sys/shard_create 0.0.0.0:0 SHARD_CREATE shard_id:1  POR Box count:1 run_crc:0xc3054bbb master:one repl:two
lsn:1 scn:4 t:snap/usr240 0.0.0.0:0 CREATE_OBJECT_SPACE n:0 flags:00000000 cardinalty:0 snap:1 wal:1 PK: i:0 min_tuple_cardinality:1 cardinality:1 type:4 unique:1 field0:{index:0 type:7 sort:-1}
lsn:1 scn:4 t:snap/snap_data 0.0.0.0:0 n:0 <1:"\x01\x00\x00\x00", "one">
lsn:1 scn:4 t:sys/shard_final 0.0.0.0:0 
lsn:1 scn:-1 t:sys/snap_final 0.0.0.0:0 
lsn:2 scn:5 t:sys/shard_alter 0.0.0.0:0 SHARD_ALTER shard_id:1  POR Box count:1 run_crc:0x0bcafead master:two repl:one
lsn:3 scn:6 t:wal/usr13 0.0.0.0:0 INSERT n:0 flags:00000000 <1:"\x01\x00\x00\x00", 845508207:"one2">
lsn:4 scn:7 t:wal/usr13 0.0.0.0:0 INSERT n:0 flags:00000000 <1:"\x01\x00\x00\x00", 846165876:"two2">
241/load shard {1} I> META mode: PROXY, proxy_addr: 'one/127.0.0.1:33013' => init
241/load shard {1} I> META mode: PARTIAL_PROXY, SCN: 4, type: POR, peer: [one, two], proxy_addr: 'one/127.0.0.1:33013' => hot_standby/one/127.0.0.1:33013/init
242/remote_hot_standby {1} I> META mode: PARTIAL_PROXY, SCN: 4, type: POR, peer: [one, two], proxy_addr: 'one/127.0.0.1:33013' => hot_standby/127.0.0.1:33013/connect
241/load shard {1} I> META mode: PARTIAL_PROXY, SCN: 4, type: POR, peer: [one, two], proxy_addr: 'one/127.0.0.1:33013' => wal_final_row
241/load shard {1} I> META mode: PARTIAL_PROXY, SCN: 4, type: POR, peer: [one, two], proxy_addr: 'one/127.0.0.1:33013' => wal_final_row
242/remote_hot_standby {1} I> META mode: PARTIAL_PROXY, SCN: 4, type: POR, peer: [one, two], proxy_addr: 'one/127.0.0.1:33013' => hot_standby/127.0.0.1:33013/ok
242/remote_hot_standby {1} I> META mode: PARTIAL_PROXY, SCN: 4, type: POR, peer: [one, two], proxy_addr: 'one/127.0.0.1:33013' => wal_final_row
242/remote_hot_standby {1} I> META mode: LOCAL, SCN: 4, type: POR, peer: [two, one] => route update, force notify
242/remote_hot_standby {1} I> META mode: LOCAL, SCN: 4, type: POR, peer: [two, one] => primary
