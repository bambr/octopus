# box.insert(["foo"])
1

# box.insert(["bar"])
1

# box.select("foo", "bar")
[["foo"], ["bar"]]

exception: object_space 0 is not configured

# box.select("foo", "bar")
[["foo"], ["bar"]]

# box.insert(["baz"])
1

# box.create_index(1, {:type=>:FASTTREE, :unique=>1, :field_0=>{:type=>:STRING, :index=>0, :sort_order=>:DESC}})
Failed with: {code: 0x202, message: 'metadata updates are forbidden because cfg.object_space is configured'}
# box.create_shard(0, :POR, "one")
:success

# box.create_index(1, {:type=>:FASTTREE, :unique=>1, :field_0=>{:type=>:STRING, :index=>0, :sort_order=>:DESC}})
:success

# box.create_shard(1, :POR, "one")
:success

# box.create_object_space(0, {:shard=>1, :index=>{:type=>:FASTTREE, :unique=>1, :field_0=>{:type=>:STRING, :index=>0, :sort_order=>:DESC}}})
:success

# box.insert(["baf"])
1

# box.select("foo", "bar", "baz", "baf")
[["foo"], ["bar"], ["baz"], ["baf"]]

lsn:8 scn:-1 t:sys/snap_initial ver:0 count:3 flags:0x00000000
lsn:8 shard:0 scn:6 t:sys/shard_create SHARD_CREATE shard_id:0  POR Box count:3 run_crc:0xe995c0fe master:one
lsn:8 shard:0 scn:6 t:snap/usr240 CREATE_OBJECT_SPACE n:0 flags:00000003 cardinalty:-1 PK: i:0 min_tuple_cardinality:0 cardinality:1 type:0 unique:1 field0:{index:0 type:7 sort:1}
lsn:8 shard:0 scn:6 t:snap/snap_data n:0 <"bar">
lsn:8 shard:0 scn:6 t:snap/snap_data n:0 <"foo">
lsn:8 shard:0 scn:6 t:snap/snap_data n:0 <"baz">
lsn:8 shard:0 scn:6 t:snap/usr241 CREATE_INDEX n:0 flags:00000000 i:1 min_tuple_cardinality:0 cardinality:1 type:4 unique:1 field0:{index:0 type:7 sort:-1}
lsn:8 shard:0 scn:6 t:sys/shard_final 
lsn:8 shard:1 scn:2 t:sys/shard_create SHARD_CREATE shard_id:1  POR Box count:0 run_crc:0x6ad0b98f master:one
lsn:8 shard:1 scn:2 t:snap/usr240 CREATE_OBJECT_SPACE n:0 flags:00000003 cardinalty:0 PK: i:0 min_tuple_cardinality:0 cardinality:1 type:4 unique:1 field0:{index:0 type:7 sort:-1}
lsn:8 shard:1 scn:2 t:sys/shard_final 
lsn:8 scn:-1 t:sys/snap_final 
